{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/src/lib/firebase_admin.ts"],"sourcesContent":["import { initializeApp, getApps, cert } from 'firebase-admin/app'\nimport { getFirestore } from 'firebase-admin/firestore'\n\nconst firebaseAdminConfig = {\n    credential: cert({\n        projectId: process.env.FIREBASE_PROJECT_ID,\n        privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'),\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL\n    })\n}\n\nexport const adminDb = getFirestore(\n    getApps().length === 0 ? initializeApp(firebaseAdminConfig) : getApps()[0]\n)"],"names":[],"mappings":";;;AAAA;AACA;;;;;;;;AAEA,MAAM,sBAAsB;IACxB,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;QACb,SAAS;QACT,svDAA8C,QAAQ,QAAQ;QAC9D,WAAW;IACf;AACJ;AAEO,MAAM,UAAU,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD,EAC9B,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD,IAAI,MAAM,KAAK,IAAI,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE,uBAAuB,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { adminDb } from \"@/lib/firebase_admin\"\nimport { Resend } from 'resend'\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\n\ninterface ConsultationData {\n    name: string\n    email: string\n    phone: string\n    service: string\n    description?: string\n    status: 'pending' | 'completed'\n    appointmentDate: string\n    createdAt: string\n}\n\nconst resend = new Resend(process.env.RESEND_API_KEY)\n\nexport async function addToNewsletter(email: string) {\n    try {\n        await resend.contacts.create({\n            email,\n            audienceId: process.env.RESEND_AUDIENCE_ID!,\n            unsubscribed: false\n        })\n\n        return { success: true }\n    } catch (error) {\n        console.error('Error adding to newsletter:', error)\n        return { success: false }\n    }\n}\n\nasync function sendStatusEmail(email: string, status: 'approved' | 'rejected', date?: string) {\n    try {\n        await resend.emails.send({\n            from: 'consultas@tudominio.com',\n            to: email,\n            subject: `Estado de tu consulta: ${status === 'approved' ? 'Aprobada' : 'Rechazada'}`,\n            html: `<p>Tu consulta ha sido <strong>${status === 'approved' ? 'aprobada' : 'rechazada'}</strong>${date ? ` para el ${new Date(date).toLocaleDateString()}` : ''}.</p>`\n        })\n    } catch (error) {\n        console.error('Error enviando email:', error)\n    }\n}\n\nexport async function updateConsultationStatus(id: string, status: 'approved' | 'rejected', date?: string) {\n    try {\n        const docRef = adminDb.collection('consultations').doc(id)\n        await docRef.update({\n            status,\n            ...(date && { appointmentDate: date })\n        })\n\n        const doc = await docRef.get()\n        const email = doc.data()?.email\n\n        if (email) {\n            await sendStatusEmail(email, status, date)\n        }\n\n        return { success: true }\n    } catch (error) {\n        return { success: false, error: 'Error actualizando estado' }\n    }\n}\n\nexport async function logout() {\n    (await cookies()).delete('admin-authenticated')\n    redirect('/')\n}\n\nexport async function createConsultation(formData: FormData) {\n    const appointmentDate = formData.get('appointmentDate') as string\n\n    try {\n        const consultationData = {\n            name: formData.get('name') as string,\n            email: formData.get('email') as string,\n            phone: formData.get('phone') as string,\n            service: formData.get('service') as string,\n            appointmentDate: new Date(appointmentDate).toISOString(),\n            description: formData.get('description') as string || '',\n            status: 'pending',\n            createdAt: new Date().toISOString()\n        }\n\n        const docRef = await adminDb.collection('consultations').add(consultationData)\n\n        await resend.emails.send({\n            from: `Consultas <${process.env.RESEND_EMAIL}>`,\n            to: consultationData.email,\n            subject: 'Consulta recibida',\n            html: `<p>Hemos recibido tu consulta para el ${new Date(appointmentDate).toLocaleDateString()}. Te contactaremos pronto.</p>`\n        })\n\n        return { success: true, id: docRef.id }\n    } catch (error) {\n        return { success: false, error: 'Error al crear consulta' }\n    }\n}\n\nexport async function handleAdminLogin(\n    prevState: { error?: string },\n    formData: FormData\n) {\n    try {\n        const password = formData.get('password')?.toString()\n\n        if (!password) {\n            return { error: 'Contraseña requerida' }\n        }\n\n        if (password !== process.env.ADMIN_PASSWORD) {\n            return { error: 'Contraseña incorrecta' }\n        }\n\n        const cookieStore = await cookies();\n        cookieStore.set('admin-authenticated', 'true', {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 7,\n            path: '/admin',\n        })\n\n        redirect('/admin')\n\n    } catch (error) {\n        if (error instanceof Error && error.message.startsWith('NEXT_REDIRECT')) {\n            throw error;\n        }\n        return { error: 'Error del servidor' };\n    }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/src/app/%28auth%29/admin/layout.tsx"],"sourcesContent":["import { logout } from '@/app/actions';\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\n\nexport default async function AdminLayout({ children }: { children: React.ReactNode }) {\n    const cookieStore = await cookies();\n    if (!cookieStore.get('admin-authenticated')?.value) {\n        redirect('/admin/login')\n    }\n\n    return <>\n        <form action={logout}>\n            <button\n                type=\"submit\"\n                className=\"flex items-center gap-2 text-red-600 hover:text-red-800 transition-colors\"\n            >\n                <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-5 w-5\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                >\n                    <path d=\"M16 9v-4l8 7-8 7v-4h-8v-6h8zm-2 10v-.083c-1.178.685-2.542 1.083-4 1.083-4.411 0-8-3.589-8-8s3.589-8 8-8c1.458 0 2.822.398 4 1.083v-2.245c-1.226-.536-2.576-.838-4-.838-5.522 0-10 4.477-10 10s4.478 10 10 10c1.424 0 2.774-.302 4-.838v-2.162z\" />\n                </svg>\n                Cerrar Sesión\n            </button>\n        </form>\n        {children}\n    </>\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;;;;;;AAEe,eAAe,YAAY,EAAE,QAAQ,EAAiC;IACjF,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,IAAI,CAAC,YAAY,GAAG,CAAC,wBAAwB,OAAO;QAChD,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACb;IAEA,qBAAO;;0BACH,8OAAC;gBAAK,QAAQ,qHAAA,CAAA,SAAM;0BAChB,cAAA,8OAAC;oBACG,MAAK;oBACL,WAAU;;sCAEV,8OAAC;4BACG,OAAM;4BACN,WAAU;4BACV,SAAQ;4BACR,MAAK;sCAEL,cAAA,8OAAC;gCAAK,GAAE;;;;;;;;;;;wBACN;;;;;;;;;;;;YAIb;;;AAET","debugId":null}}]
}