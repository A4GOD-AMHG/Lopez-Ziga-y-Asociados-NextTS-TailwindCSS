{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { adminDb } from \"@/lib/firebase_admin\"\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\n\ninterface ConsultationData {\n    name: string\n    email: string\n    phone: string\n    service: string\n    description?: string\n    status: 'pending' | 'completed'\n    createdAt: string\n}\n\nexport async function createConsultation(formData: FormData): Promise<{\n    success: boolean;\n    id?: string;\n    error?: string\n}> {\n    const rawPhone = formData.get('phone') as string\n    const cleanedPhone = rawPhone.replace(/[\\s\\-\\(\\)]/g, '')\n\n    try {\n        if (!formData.get('email') || !formData.get('phone')) {\n            throw new Error('Email y teléfono son requeridos')\n        }\n\n        const consultation: ConsultationData = {\n            name: formData.get('name') as string,\n            email: formData.get('email') as string,\n            phone: formData.get('phone') as string,\n            service: formData.get('service') as string,\n            description: formData.get('description') as string || '',\n            status: 'pending',\n            createdAt: new Date().toISOString()\n        }\n\n        if (!cleanedPhone) {\n            throw new Error('El teléfono es requerido')\n        }\n\n        const phoneRegex = /^\\+?\\d{8,15}$/\n\n        if (!phoneRegex.test(cleanedPhone)) {\n            throw new Error('Formato inválido. Ejemplos válidos:\\n+34612345678\\n912345678')\n        }\n\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n        if (!emailRegex.test(consultation.email)) {\n            throw new Error('Formato de email inválido')\n        }\n\n        const docRef = await adminDb.collection('consultations').add(consultation)\n        return { success: true, id: docRef.id }\n\n    } catch (error: any) {\n        console.error('Error detallado:', error)\n        return {\n            success: false,\n            error: error.message || 'Error desconocido al crear la consulta'\n        }\n    }\n}\n\nexport async function handleAdminLogin(\n    prevState: { error?: string },\n    formData: FormData\n) {\n    try {\n        const password = formData.get('password')?.toString()\n\n        if (!password) {\n            return { error: 'Contraseña requerida' }\n        }\n\n        if (password !== process.env.ADMIN_PASSWORD) {\n            return { error: 'Contraseña incorrecta' }\n        }\n\n        const cookieStore = await cookies();\n        cookieStore.set('admin-authenticated', 'true', {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 7,\n            path: '/admin',\n        })\n\n        redirect('/admin')\n\n    } catch (error) {\n        if (error instanceof Error && error.message.startsWith('NEXT_REDIRECT')) {\n            throw error;\n        }\n        return { error: 'Error del servidor' };\n    }\n}"],"names":[],"mappings":";;;;;;IAgBsB;IAkDA","debugId":null}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/src/app/%28auth%29/admin/login/page.tsx"],"sourcesContent":["'use client'\n\n\nimport { handleAdminLogin } from '@/app/actions'\nimport { useActionState } from 'react'\n\nconst initialState = {\n    success: false,\n    error: ''\n}\n\nexport default function LoginPage() {\n    const [state, formAction] = useActionState(handleAdminLogin, initialState)\n\n    return (\n        <div className=\"bg-gray-50 flex grow items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8 space-y-6 transition-all duration-300 hover:shadow-2xl\" >\n                <div className=\"text-center space-y-2\">\n                    <h1 className=\"text-3xl font-bold text-gray-900\">Acceso Administrativo</h1>\n                    <p className=\"text-gray-600\">Ingresa tus credenciales para continuar</p>\n                </div>\n\n                <form action={formAction} className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                        <label className=\"block text-sm font-medium text-gray-700\">Contraseña</label>\n                        <input\n                            type=\"password\"\n                            name=\"password\"\n                            required\n                            className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\n                            placeholder=\"••••••••\"\n                        />\n                    </div>\n\n                    {state?.error && (\n                        <div className=\"bg-red-50 text-red-700 p-3 rounded-lg flex items-center\">\n                            <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                            </svg>\n                            <span>{state.error}</span>\n                        </div>\n                    )}\n\n                    <button\n                        type=\"submit\"\n                        className=\"w-full bg-gray-900 cursor-pointer hover:bg-gray-800 text-white py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center\"\n                    >\n                        <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                        </svg>\n                        Ingresar al Panel\n                    </button>\n                </form>\n            </div>\n        </div >\n    )\n}\n//     return (\n//         <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n//             <div className=\"bg-white p-8 rounded-lg shadow-md w-96\">\n//                 <h1 className=\"text-2xl font-bold mb-4\">Acceso Administrador</h1>\n//                 <form action={formAction}>\n//                     <input\n//                         type=\"password\"\n//                         name=\"password\"\n//                         required\n//                         className=\"w-full p-2 border rounded mb-4\"\n//                         placeholder=\"Contraseña\"\n//                     />\n//                     {state?.error && <p className=\"text-red-500 mb-4\">{state.error}</p>}\n//                     <button\n//                         type=\"submit\"\n//                         className=\"w-full bg-primary text-white p-2 rounded hover:bg-secondary\"\n//                     >\n//                         Ingresar\n//                     </button>\n//                 </form>\n//             </div>\n//         </div>\n//     )\n// }"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,eAAe;IACjB,SAAS;IACT,OAAO;AACX;AAEe,SAAS;IACpB,MAAM,CAAC,OAAO,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,iBAAc,AAAD,EAAE,qHAAA,CAAA,mBAAgB,EAAE;IAE7D,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;8BAGjC,8OAAC;oBAAK,QAAQ;oBAAY,WAAU;;sCAChC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAM,WAAU;8CAA0C;;;;;;8CAC3D,8OAAC;oCACG,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,WAAU;oCACV,aAAY;;;;;;;;;;;;wBAInB,OAAO,uBACJ,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;oCAAe,MAAK;oCAAe,SAAQ;8CACtD,cAAA,8OAAC;wCAAK,UAAS;wCAAU,GAAE;wCAAoH,UAAS;;;;;;;;;;;8CAE5J,8OAAC;8CAAM,MAAM,KAAK;;;;;;;;;;;;sCAI1B,8OAAC;4BACG,MAAK;4BACL,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;oCAAe,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACpE,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;gCACnE;;;;;;;;;;;;;;;;;;;;;;;;AAO9B,EACA,eAAe;CACf,qFAAqF;CACrF,uEAAuE;CACvE,oFAAoF;CACpF,6CAA6C;CAC7C,6BAA6B;CAC7B,0CAA0C;CAC1C,0CAA0C;CAC1C,mCAAmC;CACnC,qEAAqE;CACrE,mDAAmD;CACnD,yBAAyB;CACzB,2FAA2F;CAC3F,8BAA8B;CAC9B,wCAAwC;CACxC,kGAAkG;CAClG,wBAAwB;CACxB,mCAAmC;CACnC,gCAAgC;CAChC,0BAA0B;CAC1B,qBAAqB;CACrB,iBAAiB;CACjB,QAAQ;CACR,IAAI","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///home/a4god-/Projects/Github/Lopez-Ziga-y-Asociados-NextTS-TailwindCSS/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// Since we're using the Edge build of Flight client for SSR [1], here we need to\n// also use the same Edge build to create the reference. For the client bundle,\n// we use the default and let Webpack to resolve it to the correct version.\n// 1: https://github.com/vercel/next.js/blob/16eb80b0b0be13f04a6407943664b5efd8f3d7d0/packages/next/src/server/app-render/use-flight-response.tsx#L24-L26\nexport const createServerReference = (\n  (!!process.env.NEXT_RUNTIME\n    ? // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client.edge')\n    : // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client')) as typeof import('react-server-dom-webpack/client')\n).createServerReference\n"],"names":["callServer","createServerReference","findSourceMapURL","process","env","NEXT_RUNTIME","require"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IASNC,qBAAqB,EAAA;eAArBA;;IARJC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;AAQ1B,MAAMD,wBACV,CAAA,CAAC,CAACE,QAAQC,GAAG,CAACC,YAAY,GAEvBC,QAAQ,0CAERA,QAAQ,8JAAiC,EAC7CL,qBAAqB","ignoreList":[0],"debugId":null}}]
}